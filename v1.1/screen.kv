#:import platform kivy.utils.platform

MyScreenManager:
	MenuScreen:
	EncryptScreen:
	DecryptScreen:

<MenuScreen>:
	name: 'menu_screen'
	FloatLayout:
		Label:
			text: 'Photo[color=0000ff]Crypt[/color]\n[color=777777]v 1.1[/color]'
			markup: True
			size: self.size
			halign: 'center'
			font_size: 120
			pos_hint: {'x':0,'center_y':.8}
		Button:
			text: 'Encrypt'
			font_size: 50
			on_release: root.parent.current = "encrypt_screen"
			background_color: 0,0,1,.8
			pos_hint: {'center_x':.5,'center_y':.4} 
			size_hint: (.8,.1)
		Button:
			text: 'Decrypt'
			font_size: 50
			on_release: root.parent.current = "decrypt_screen"
			background_color: 0,0,1,.8
			pos_hint: {'center_x':.5,'center_y':.25} 
			size_hint: (.8,.1)

<EncryptScreen>:
	name: 'encrypt_screen'
	FloatLayout:
		Label:
			text: 'Message:'
			text_size: self.size
			pos_hint: {'x':.05,'y':.95} 
			font_size: 50
		TextInput:
			id: message
			pos_hint: {'x':.05,'top':.95}
			size_hint: (.9,.3)
			font_size: 30
		Label:
			text: root.text
			halign: 'center'
			markup: True
			text_size: self.size
			pos_hint: {'y':.6} 
			font_size: 35
		Button:
			text: 'Select Photo'
			font_size: 50
			background_color: 0,0,1,.8
			pos_hint: {'center_x':.5,'center_y':.42} 
			size_hint: (.8,.08)
			on_release: root.select_photo()
		Button:
			text: 'Encode'
			font_size: 50
			background_color: 0,0,1,.8
			pos_hint: {'center_x':.5,'center_y':.3} 
			size_hint: (.8,.08)
			on_release: root.encode()
		Button:
			text: 'Menu'
			font_size: 50
			background_color: 0,0,1,.8
			pos_hint: {'center_x':.5,'center_y':.18} 
			size_hint: (.8,.08)
			on_release: root.parent.current = 'menu_screen'
		Label:
			text: root.error
			halign: 'center'
			markup: True
			color: 1,0,0,1
			text_size: self.size
			pos_hint: {'y':.05} 
			font_size: 35

<DecryptScreen>:
	name: 'decrypt_screen'
	FloatLayout:
		Button:
			text: 'Select Photo'
			font_size: 50
			background_color: 0,0,1,.8
			pos_hint: {'center_x':.5,'top':.95}
			size_hint: (.8,.08)
			on_release: root.select_photo()
		Label:
			text: root.text
			halign: 'center'
			markup: True
			text_size: self.size
			pos_hint: {'y':.8} 
			font_size: 35
		Button:
			text: 'Decode'
			font_size: 50
			background_color: 0,0,1,.8
			pos_hint: {'center_x':.5,'center_y':.72} 
			size_hint: (.8,.08)
			on_release: root.decode()
		TextInput:
			id: message
			readonly: True
			pos_hint: {'x':.05,'top':.65}
			size_hint: (.9,.4)
			font_size: 30
		Button:
			text: 'Menu'
			font_size: 50
			background_color: 0,0,1,.8
			pos_hint: {'center_x':.5,'center_y':.18} 
			size_hint: (.8,.08)
			on_release: root.parent.current = 'menu_screen'
		Label:
			text: root.error
			halign: 'center'
			markup: True
			color: 1,0,0,1
			text_size: self.size
			pos_hint: {'y':.05} 
			font_size: 35

<FilePopup@Popup>:
	title: 'Select an image file'
	FloatLayout:
		FileChooserIconView:
			rootpath: '/storage/emulated/0/' if platform == 'android' else '/'
			id: filechooser
			on_selection: root.file_selection(self.selection)
		Label:
			text: root.error
			pos_hint: {"center_x":.5,"center_y":.1}
			font_size: 30
			color: 1,0,0,1

<SavePopup@Popup>:
	title: 'Select Folder to Save Image'
	FloatLayout:
		FileChooserIconView:
			id: filechooser
			rootpath: '/storage/emulated/0/' if platform == 'android' else '/'
			size_hint: (1,.95)
			pos_hint: {'x':0,'top':.95}
			on_selection: root.file_selection(self.selection)
		Label:
			text: root.error
			pos_hint: {"center_x":.5,"center_y":.1}
			font_size: 30
			color: 1,0,0,1
		TextInput:
			id: user_input
			multiline: False
			pos_hint: {'x':0,'top':1}
			size_hint: (.7,.05)
			font_size: 40
		Button:
			text: "Save"
			pos_hint: {'x':.7,'top':1}
			size_hint: (.3,.05)
			font_size: 30
			background_color: 0,0,1,.8
			on_release: root.save()
